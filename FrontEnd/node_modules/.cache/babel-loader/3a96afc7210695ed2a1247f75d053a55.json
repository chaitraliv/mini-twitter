{"ast":null,"code":"var _jsxFileName = \"/home/vishakha/Documents/Project using ReactJS/Updated Project- MiniTwitter/mini-twitter/FrontEnd/src/RegistrationPage.js\";\nimport React, { Component } from \"react\";\nimport \"./RegistrationPage.css\";\nimport history from \"./history\";\nimport axios from \"axios\"; // regular expression for validating email-id entered by user\n\nconst validEmailRegex = RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i); // function which returs boolean value by validating all the feilds and save the errors in the object error\n\nconst validateForm = errors => {\n  let valid = true;\n  Object.values(errors).forEach(val => val.length > 0 && (valid = false));\n  return valid;\n}; // component to render Register Page\n\n\nexport class RegistrationPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.clickEvent = event => {\n      event.preventDefault();\n      axios.post(\"http://127.0.0.1:8020/minitwitter/users/\", {\n        first_name: this.state.firstname,\n        last_name: this.state.lastname,\n        email: this.state.email,\n        username: this.state.username,\n        password: this.state.password\n      }) // link of backend api\n      .then(response => {\n        console.log(response);\n\n        if (response[\"status\"] === 201) {\n          console.info(\"Valid Form\");\n          console.log(this.state);\n          this.setState({\n            id: response.data.id\n          });\n          axios.post(\"http://127.0.0.1:8020/minitwitter/login/\", {\n            username: this.state.username,\n            password: this.state.password\n          }).then(response => {\n            console.log(\"login-\", response);\n            console.log(\"username-\", this.state.username);\n\n            if (response[\"status\"] === 200) {\n              const userToken = response.data.token;\n              console.log(\"token after rgtn \", response.data.token);\n              localStorage.setItem(\"token\", userToken);\n              alert(`Hey ${this.state.firstname}.... Registration Successful! `);\n              history.push(\"/minitwitter/newuser/\" + this.state.id); //Rendering on next page\n            } else {\n              alert(`Server Error! `);\n              console.log(\"Token is empty\");\n            }\n          });\n        }\n      }).catch(error => {\n        console.log(error.response[\"status\"]);\n\n        if (error.response[\"status\"] === 400) {\n          console.log(this.state);\n          alert(`Username Already Exist! `);\n        } // if(error.response['status']  === 406){\n        //   console.log(this.state)\n        //   alert(`Special characters are not allowed! `);\n        // }\n\n      });\n    };\n\n    this.onChangeEvent = event => {\n      event.preventDefault();\n      const {\n        name,\n        value\n      } = event.target;\n      let errors = this.state.errors; // for catching the error in object and rendering  appropriate warning on UI\n\n      switch (name) {\n        case \"firstname\":\n          errors.firstname = value.length < 2 ? \"First Name must be 2 characters long!\" : \"\";\n          break;\n\n        case \"lastname\":\n          errors.lastname = value.length < 2 ? \"Last Name must be 2 characters long!\" : \"\";\n          break;\n\n        case \"email\":\n          errors.email = validEmailRegex.test(value) ? \"\" : \"Email is not valid!\";\n          break;\n\n        case \"username\":\n          errors.username = value.length < 5 ? \"First Name must be 5 characters long!\" : \"\";\n          break;\n\n        case \"password\":\n          errors.password = value.length < 8 ? \"Password must be 8 characters long!\" : \"\";\n          break;\n\n        default:\n          break;\n      }\n\n      this.setState({\n        errors,\n        [name]: value\n      }); // error object contains all the feilds as property which have validation error\n    };\n\n    this.state = {\n      username: null,\n      password: null,\n      email: null,\n      firstname: null,\n      lastname: null,\n      id: 0,\n      errors: {\n        firstname: \"please enter name\",\n        lastname: \" please enter last name\",\n        username: \"please enter username\",\n        email: \"please enter mail-id\",\n        password: \"please set password\"\n      }\n    };\n  } // Function to perform action on button click\n\n\n  render() {\n    const {\n      username,\n      password,\n      email,\n      firstname,\n      lastname\n    } = this.state;\n    const {\n      errors\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"reg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      id: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }, \"InstaTwitter\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: \"./logo.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"registrationPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"textRegister\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }\n    }, \"Registration\"), /*#__PURE__*/React.createElement(\"h3\", {\n      id: \"tagline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 15\n      }\n    }, \"Create your account here!\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      id: \"registration-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, \" Fisrt Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"first-name\",\n      placeholder: \"Enter First Name\",\n      name: \"firstname\",\n      value: firstname,\n      required: \"text\",\n      onChange: this.onChangeEvent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }), errors.firstname.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 19\n      }\n    }, errors.firstname)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      id: \"registration-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }, \"Last Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"last-name\",\n      placeholder: \"Enter Last Name\",\n      name: \"lastname\",\n      value: lastname,\n      required: \"\",\n      onChange: this.onChangeEvent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    }), errors.lastname.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }\n    }, errors.lastname)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      id: \"registration-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      id: \"email\",\n      placeholder: \"Enter Email ID \",\n      name: \"email\",\n      value: email,\n      required: \"\",\n      onChange: this.onChangeEvent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }), errors.email.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }\n    }, errors.email)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      id: \"registration-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }\n    }, \"UserName\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"use-rname\",\n      placeholder: \"Enter username \",\n      name: \"username\",\n      value: username,\n      required: \"\",\n      onChange: this.onChangeEvent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    }), errors.username.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 19\n      }\n    }, errors.username)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      id: \"registration-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      id: \"pass-word\",\n      placeholder: \"Set Password of 8 Characters\",\n      name: \"password\",\n      value: password,\n      required: \"\",\n      onChange: this.onChangeEvent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }\n    }), errors.password.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 19\n      }\n    }, errors.password)), errors.username == errors.lastname && errors.lastname == errors.username && errors.lastname == errors.email && errors.lastname == errors.password ? /*#__PURE__*/React.createElement(\"button\", {\n      id: \"btnSignIn\",\n      type: \"Submit\",\n      onClick: this.clickEvent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }\n    }, \"Register\") : null))));\n  }\n\n}\nexport default RegistrationPage;","map":{"version":3,"sources":["/home/vishakha/Documents/Project using ReactJS/Updated Project- MiniTwitter/mini-twitter/FrontEnd/src/RegistrationPage.js"],"names":["React","Component","history","axios","validEmailRegex","RegExp","validateForm","errors","valid","Object","values","forEach","val","length","RegistrationPage","constructor","props","clickEvent","event","preventDefault","post","first_name","state","firstname","last_name","lastname","email","username","password","then","response","console","log","info","setState","id","data","userToken","token","localStorage","setItem","alert","push","catch","error","onChangeEvent","name","value","target","test","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./RegistrationPage.css\";\nimport history from \"./history\";\nimport axios from \"axios\";\n\n// regular expression for validating email-id entered by user\nconst validEmailRegex = RegExp(\n  /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\n);\n\n// function which returs boolean value by validating all the feilds and save the errors in the object error\nconst validateForm = (errors) => {\n  let valid = true;\n  Object.values(errors).forEach((val) => val.length > 0 && (valid = false));\n  return valid;\n};\n\n// component to render Register Page\nexport class RegistrationPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: null,\n      password: null,\n      email: null,\n      firstname: null,\n      lastname: null,\n      id: 0,\n      errors: {\n        firstname: \"please enter name\",\n        lastname: \" please enter last name\",\n        username: \"please enter username\",\n        email: \"please enter mail-id\",\n        password: \"please set password\",\n      },\n    };\n  }\n\n  // Function to perform action on button click\n  clickEvent = (event) => {\n    event.preventDefault();\n\n    axios\n      .post(\"http://127.0.0.1:8020/minitwitter/users/\", {\n        first_name: this.state.firstname,\n        last_name: this.state.lastname,\n        email: this.state.email,\n        username: this.state.username,\n        password: this.state.password,\n      }) // link of backend api\n      .then((response) => {\n        console.log(response);\n\n        if (response[\"status\"] === 201) {\n          console.info(\"Valid Form\");\n          console.log(this.state);\n          this.setState({\n            id: response.data.id,\n          });\n\n          axios\n            .post(\"http://127.0.0.1:8020/minitwitter/login/\", {\n              username: this.state.username,\n              password: this.state.password,\n            })\n            .then((response) => {\n              console.log(\"login-\", response);\n              console.log(\"username-\", this.state.username);\n              if (response[\"status\"] === 200) {\n                const userToken = response.data.token;\n                console.log(\"token after rgtn \", response.data.token);\n                localStorage.setItem(\"token\", userToken);\n                alert(\n                  `Hey ${this.state.firstname}.... Registration Successful! `\n                );\n                history.push(\"/minitwitter/newuser/\" + this.state.id); //Rendering on next page\n              } else {\n                alert(`Server Error! `);\n                console.log(\"Token is empty\");\n              }\n            });\n        }\n      })\n      .catch((error) => {\n        console.log(error.response[\"status\"]);\n\n        if (error.response[\"status\"] === 400) {\n          console.log(this.state);\n          alert(`Username Already Exist! `);\n        }\n        // if(error.response['status']  === 406){\n        //   console.log(this.state)\n        //   alert(`Special characters are not allowed! `);\n        // }\n      });\n  };\n\n  // Function to perform action for onchange event\n  onChangeEvent = (event) => {\n    event.preventDefault();\n    const { name, value } = event.target;\n\n    let errors = this.state.errors;\n\n    // for catching the error in object and rendering  appropriate warning on UI\n    switch (name) {\n      case \"firstname\":\n        errors.firstname =\n          value.length < 2 ? \"First Name must be 2 characters long!\" : \"\";\n        break;\n\n      case \"lastname\":\n        errors.lastname =\n          value.length < 2 ? \"Last Name must be 2 characters long!\" : \"\";\n        break;\n\n      case \"email\":\n        errors.email = validEmailRegex.test(value) ? \"\" : \"Email is not valid!\";\n        break;\n      case \"username\":\n        errors.username =\n          value.length < 5 ? \"First Name must be 5 characters long!\" : \"\";\n        break;\n      case \"password\":\n        errors.password =\n          value.length < 8 ? \"Password must be 8 characters long!\" : \"\";\n        break;\n      default:\n        break;\n    }\n\n    this.setState({ errors, [name]: value }); // error object contains all the feilds as property which have validation error\n  };\n\n  render() {\n    const {\n      username,\n      password,\n      email,\n      firstname,\n      lastname,\n      \n    } = this.state;\n    const { errors } = this.state;\n    return (\n      <div className=\"reg\">\n        <h1 id=\"title\">InstaTwitter</h1>\n        <img src=\"./logo.png\"></img>\n        <div className=\"box\">\n          <form>\n            <div className=\"registrationPage\">\n              <br></br>\n              <div id=\"textRegister\">Registration</div>\n              <h3 id=\"tagline\">Create your account here!</h3>\n              <div>\n                <label id=\"registration-label\"> Fisrt Name</label>\n                <input\n                  type=\"text\"\n                  id=\"first-name\"\n                  placeholder=\"Enter First Name\"\n                  name=\"firstname\"\n                  value={firstname}\n                  required=\"text\"\n                  onChange={this.onChangeEvent}\n                ></input>\n                {errors.firstname.length > 0 && (\n                  <span className=\"error\">{errors.firstname}</span>\n                )}\n              </div>\n              <div>\n                <label id=\"registration-label\">Last Name</label>\n                <input\n                  type=\"text\"\n                  id=\"last-name\"\n                  placeholder=\"Enter Last Name\"\n                  name=\"lastname\"\n                  value={lastname}\n                  required=\"\"\n                  onChange={this.onChangeEvent}\n                ></input>\n                {errors.lastname.length > 0 && (\n                  <span className=\"error\">{errors.lastname}</span>\n                )}\n              </div>\n              <div>\n                <label id=\"registration-label\">Email</label>\n                <input\n                  type=\"email\"\n                  id=\"email\"\n                  placeholder=\"Enter Email ID \"\n                  name=\"email\"\n                  value={email}\n                  required=\"\"\n                  onChange={this.onChangeEvent}\n                ></input>\n                {errors.email.length > 0 && (\n                  <span className=\"error\">{errors.email}</span>\n                )}\n              </div>\n\n              <div>\n                <label id=\"registration-label\">UserName</label>\n                <input\n                  type=\"text\"\n                  id=\"use-rname\"\n                  placeholder=\"Enter username \"\n                  name=\"username\"\n                  value={username}\n                  required=\"\"\n                  onChange={this.onChangeEvent}\n                ></input>\n                {errors.username.length > 0 && (\n                  <span className=\"error\">{errors.username}</span>\n                )}\n              </div>\n              <div>\n                <label id=\"registration-label\">Password</label>\n                <input\n                  type=\"password\"\n                  id=\"pass-word\"\n                  placeholder=\"Set Password of 8 Characters\"\n                  name=\"password\"\n                  value={password}\n                  required=\"\"\n                  onChange={this.onChangeEvent}\n                ></input>\n\n                {errors.password.length > 0 && (\n                  <span className=\"error\">{errors.password}</span>\n                )}\n              </div>\n\n              {errors.username == errors.lastname &&\n              errors.lastname == errors.username &&\n              errors.lastname == errors.email &&\n              errors.lastname == errors.password ? (\n                <button id=\"btnSignIn\" type=\"Submit\" onClick={this.clickEvent}>\n                  Register\n                </button>\n              ) : null}\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default RegistrationPage;\n"]},"metadata":{},"sourceType":"module"}